"use strict";exports.id=436,exports.ids=[436],exports.modules={70436:(e,n,i)=>{i.d(n,{Z:()=>__WEBPACK_DEFAULT_EXPORT__});var t=i(30784),s=i(9885),r=i(57114),l=i(19390),o=i(72586),a=i(43872),d=i(10413),c=i.n(d),x=i(33987),h=i.n(x),g=i(16854),p=i(92133),u=i.n(p),j=i(42454),f=i.n(j),m=i(62969),w=i.n(m),y=i(42153),b=i.n(y),C=i(16856),v=i.n(C),S=i(69547),Z=i.n(S),k=i(64832),D=i.n(k),L=i(81932),_=i.n(L),R=i(30321),z=i(39223),A=i(8349),E=i(90343),I=i.n(E),M=i(64731),F=i.n(M),T=i(61522),$=i(48060),O=i.n($),P=i(76151),U=i(71829),B=i.n(U),W=i(88707),Y=i.n(W),H=i(69700),N=i(99066),G=i(30237),K=i(48007),X=i(21904),J=i(98604);let __WEBPACK_DEFAULT_EXPORT__=function({loading:e,listingId:n,title:i,createdAt:d,updatedAt:x,description:p,images:j,isFree:m,location:y,price:C,studentVerification:S,priceHistory:k}){let[L,E]=(0,s.useState)(!1),M=(0,l.Z)(),$=(0,o.Z)(M.breakpoints.down("sm")),[U,W]=(0,s.useState)(null),[Q,q]=(0,s.useState)(!1),[V,ee]=(0,s.useState)(""),en=(0,r.useRouter)(),handleSnackbarClose=(e,n)=>{"clickaway"!==n&&q(!1)},handleCloseMenu=()=>{W(null)},handleDeleteListing=async e=>{try{let n=(0,T.JU)(P.db,"listings",e);await (0,T.oe)(n),ee("Listing deleted successfully."),q(!0)}catch(e){console.error("Error deleting listing: ",e),ee("Failed to delete listing."),q(!0)}},ei=Array.isArray(j)&&j.length>0?j[0]:"default-image-url",formatDate=e=>{if(!e||!e.seconds)return"Unknown";let n=new Date(1e3*e.seconds),i=F()(n).format("MM/DD/YYYY");return"Invalid date"!==i?i:"Unknown"};return e?(0,t.jsxs)(a.Z,{sx:{width:$?"100%":300,minHeight:"420px",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.25)",marginBottom:2,flexDirection:"column",display:"flex"},children:[t.jsx(c(),{variant:"rectangular",width:"100%",height:118}),(0,t.jsxs)(a.Z,{sx:{p:2},children:[t.jsx(c(),{variant:"text",width:"60%"}),t.jsx(c(),{variant:"text"}),t.jsx(c(),{variant:"text"}),t.jsx(c(),{variant:"text",width:"80%"})]}),(0,t.jsxs)(a.Z,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[t.jsx(c(),{variant:"text",width:"40%"}),t.jsx(c(),{variant:"circular",width:40,height:40})]})]}):(0,t.jsxs)(a.Z,{sx:{width:$?"100%":300,height:"460px",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.25)",marginBottom:2,flexDirection:"column",display:"flex",backgroundColor:"white"},children:[(0,t.jsxs)(a.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white"},children:[t.jsx(O(),{"aria-label":"settings","aria-controls":"long-menu","aria-haspopup":"true",onClick:e=>{W(e.currentTarget)},sx:{margin:"0 8px"},children:t.jsx(H.Z,{})}),(0,t.jsxs)(B(),{id:"long-menu",anchorEl:U,open:!!U,onClose:handleCloseMenu,children:[(0,t.jsxs)(Y(),{onClick:()=>{console.log("Listing shared"),ee("Listing shared successfully."),q(!0),handleCloseMenu()},children:[t.jsx(N.Z,{fontSize:"small",sx:{marginRight:1}})," Copy Link to Share"]}),(0,t.jsxs)(Y(),{onClick:()=>{I()(n),ee("Listing ID copied to clipboard."),q(!0),handleCloseMenu()},children:[t.jsx(J.Z,{fontSize:"small",sx:{marginRight:1}})," Copy Listing ID"]}),(0,t.jsxs)(Y(),{onClick:()=>handleDeleteListing(n),sx:{color:K.Q6[500]},children:[t.jsx(G.Z,{fontSize:"small",sx:{marginRight:1}})," Delete Listing"]}),(0,t.jsxs)(Y(),{onClick:()=>{console.log("Listing reported"),ee("Listing reported successfully."),q(!0),handleCloseMenu()},children:[t.jsx(X.Z,{fontSize:"small",sx:{marginRight:1}})," Report Listing"]})]})]}),(0,t.jsxs)(a.Z,{sx:{flexGrow:1,cursor:"pointer"},onClick:()=>{en.push(`/listing/${n}`)},children:[t.jsx(a.Z,{sx:{width:"100%",position:"relative",paddingTop:"56.25%"},children:t.jsx("img",{src:ei,alt:i,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})}),(0,t.jsxs)(a.Z,{sx:{p:2,flexGrow:1},style:{backgroundColor:"white"},children:[t.jsx(h(),{variant:"h6",sx:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:i}),t.jsx(h(),{variant:"subtitle2",color:"textSecondary",sx:{mb:1},children:p}),t.jsx(h(),{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:`Created: ${formatDate(d)||"Not available"}`}),x&&t.jsx(h(),{variant:"caption",color:"textSecondary"})]}),(0,t.jsxs)(g.default,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{p:2,backgroundColor:"white"},children:[t.jsx(h(),{variant:"h5",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:0===C?t.jsx(u(),{icon:t.jsx(A.Z,{}),label:"Free",size:"large"}):`$${Number(C).toFixed(2)}`}),S&&(0,t.jsxs)(f(),{badgeContent:t.jsx(z.Z,{color:"primary"}),sx:{mr:4},anchorOrigin:{vertical:"top",horizontal:"right"},children:[t.jsx(a.Z,{})," "]})]}),(0,t.jsxs)(a.Z,{sx:{p:2,display:"flex",alignItems:"center",backgroundColor:"white"},children:[t.jsx(R.Z,{fontSize:"small",color:"primary"}),t.jsx(h(),{variant:"caption",color:"textSecondary",sx:{ml:1},children:y})]})]}),(0,t.jsxs)(w(),{open:L,onClose:()=>{E(!1)},children:[t.jsx(b(),{children:"Price History"}),t.jsx(v(),{children:t.jsx(Z(),{children:Array.isArray(k)?k.map(e=>`${e.price} on ${formatDate(e.date)}`).join("\n"):"No price history available"})})]}),t.jsx(D(),{open:Q,autoHideDuration:6e3,onClose:handleSnackbarClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:t.jsx(_(),{onClose:handleSnackbarClose,severity:"success",sx:{width:"100%"},children:V})})]})}}};