"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6],{70148:function(e,t,n){n.d(t,{I8:function(){return l},db:function(){return c},tO:function(){return d}});var i=n(20994);n(35073);var s=n(24086),r=n(69584),o=n(53085);let a=(0,i.ZF)({apiKey:"AIzaSyBjEHdFQZFsfN-RGa59n16XO7qQ4dhFsAo",authDomain:"slomarket-ebbd9.firebaseapp.com",projectId:"slomarket-ebbd9",storageBucket:"slomarket-ebbd9.appspot.com",messagingSenderId:"247606192779",appId:"1:247606192779:web:421bdc33c388c5c8e828e",measurementId:"G-E3DPKJ6L5V"}),l=(0,o.v0)(a),c=(0,s.ad)(a),d=(0,r.cF)(a)},64165:function(e,t,n){var i=n(57437),s=n(2265),r=n(24033),o=n(41101),a=n(22135),l=n(96507),c=n(11898),d=n(43226),x=n(13457),h=n(47827),p=n(64236),u=n(89394),g=n(91797),j=n(26337),Z=n(64173),f=n(57292),m=n(67070),b=n(55037),w=n(4510),y=n(14565),C=n(2390),v=n.n(C),k=n(62067),S=n.n(k),D=n(24086),I=n(52653),L=n(70148),z=n(33932),F=n(61417),R=n(4856),M=n(72467),A=n(46446),E=n(34273),N=n(11699),O=n(7175);t.Z=function(e){let{loading:t,listingId:n,title:C,createdAt:k,updatedAt:B,description:G,images:H,isFree:Y,location:_,price:U,studentVerification:J,priceHistory:K}=e,[P,Q]=(0,s.useState)(!1),T=(0,o.Z)(),W=(0,a.Z)(T.breakpoints.down("sm")),[q,V]=(0,s.useState)(null),[X,$]=(0,s.useState)(!1),[ee,et]=(0,s.useState)(""),en=(0,r.useRouter)(),handleSnackbarClose=(e,t)=>{"clickaway"!==t&&$(!1)},handleCloseMenu=()=>{V(null)},handleDeleteListing=async e=>{try{let t=(0,D.JU)(L.db,"listings",e);await (0,D.oe)(t),et("Listing deleted successfully."),$(!0)}catch(e){console.error("Error deleting listing: ",e),et("Failed to delete listing."),$(!0)}},ei=Array.isArray(H)&&H.length>0?H[0]:"default-image-url",formatDate=e=>{if(!e||!e.seconds)return"Unknown";let t=new Date(1e3*e.seconds),n=S()(t).format("MM/DD/YYYY");return"Invalid date"!==n?n:"Unknown"};return t?(0,i.jsxs)(l.Z,{sx:{width:W?"100%":300,minHeight:"420px",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.25)",marginBottom:2,flexDirection:"column",display:"flex"},children:[(0,i.jsx)(c.Z,{variant:"rectangular",width:"100%",height:118}),(0,i.jsxs)(l.Z,{sx:{p:2},children:[(0,i.jsx)(c.Z,{variant:"text",width:"60%"}),(0,i.jsx)(c.Z,{variant:"text"}),(0,i.jsx)(c.Z,{variant:"text"}),(0,i.jsx)(c.Z,{variant:"text",width:"80%"})]}),(0,i.jsxs)(l.Z,{sx:{p:2,display:"flex",justifyContent:"space-between"},children:[(0,i.jsx)(c.Z,{variant:"text",width:"40%"}),(0,i.jsx)(c.Z,{variant:"circular",width:40,height:40})]})]}):(0,i.jsxs)(l.Z,{sx:{width:W?"100%":300,height:"460px",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 0px 4px rgba(0, 0, 0, 0.25)",marginBottom:2,flexDirection:"column",display:"flex",backgroundColor:"white"},children:[(0,i.jsxs)(l.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"flex-end",backgroundColor:"white"},children:[(0,i.jsx)(I.Z,{"aria-label":"settings","aria-controls":"long-menu","aria-haspopup":"true",onClick:e=>{V(e.currentTarget)},sx:{margin:"0 8px"},children:(0,i.jsx)(R.Z,{})}),(0,i.jsxs)(z.Z,{id:"long-menu",anchorEl:q,open:!!q,onClose:handleCloseMenu,children:[(0,i.jsxs)(F.Z,{onClick:()=>{console.log("Listing shared"),et("Listing shared successfully."),$(!0),handleCloseMenu()},children:[(0,i.jsx)(M.Z,{fontSize:"small",sx:{marginRight:1}})," Copy Link to Share"]}),(0,i.jsxs)(F.Z,{onClick:()=>{v()(n),et("Listing ID copied to clipboard."),$(!0),handleCloseMenu()},children:[(0,i.jsx)(O.Z,{fontSize:"small",sx:{marginRight:1}})," Copy Listing ID"]}),(0,i.jsxs)(F.Z,{onClick:()=>handleDeleteListing(n),sx:{color:E.Z[500]},children:[(0,i.jsx)(A.Z,{fontSize:"small",sx:{marginRight:1}})," Delete Listing"]}),(0,i.jsxs)(F.Z,{onClick:()=>{console.log("Listing reported"),et("Listing reported successfully."),$(!0),handleCloseMenu()},children:[(0,i.jsx)(N.Z,{fontSize:"small",sx:{marginRight:1}})," Report Listing"]})]})]}),(0,i.jsxs)(l.Z,{sx:{flexGrow:1,cursor:"pointer"},onClick:()=>{en.push("/listing/".concat(n))},children:[(0,i.jsx)(l.Z,{sx:{width:"100%",position:"relative",paddingTop:"56.25%"},children:(0,i.jsx)("img",{src:ei,alt:C,style:{position:"absolute",top:0,left:0,width:"100%",height:"100%",objectFit:"cover"}})}),(0,i.jsxs)(l.Z,{sx:{p:2,flexGrow:1},style:{backgroundColor:"white"},children:[(0,i.jsx)(d.Z,{variant:"h6",sx:{fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:C}),(0,i.jsx)(d.Z,{variant:"subtitle2",color:"textSecondary",sx:{mb:1},children:G}),(0,i.jsx)(d.Z,{variant:"body2",color:"textSecondary",sx:{fontStyle:"italic"},children:"Created: ".concat(formatDate(k)||"Not available")}),B&&(0,i.jsx)(d.Z,{variant:"caption",color:"textSecondary"})]}),(0,i.jsxs)(x.Z,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{p:2,backgroundColor:"white"},children:[(0,i.jsx)(d.Z,{variant:"h5",sx:{fontWeight:"bold",display:"flex",alignItems:"center"},children:0===U?(0,i.jsx)(h.Z,{icon:(0,i.jsx)(y.Z,{}),label:"Free",size:"large"}):"$".concat(Number(U).toFixed(2))}),J&&(0,i.jsxs)(p.Z,{badgeContent:(0,i.jsx)(w.Z,{color:"primary"}),sx:{mr:4},anchorOrigin:{vertical:"top",horizontal:"right"},children:[(0,i.jsx)(l.Z,{})," "]})]}),(0,i.jsxs)(l.Z,{sx:{p:2,display:"flex",alignItems:"center",backgroundColor:"white"},children:[(0,i.jsx)(b.Z,{fontSize:"small",color:"primary"}),(0,i.jsx)(d.Z,{variant:"caption",color:"textSecondary",sx:{ml:1},children:_})]})]}),(0,i.jsxs)(u.Z,{open:P,onClose:()=>{Q(!1)},children:[(0,i.jsx)(g.Z,{children:"Price History"}),(0,i.jsx)(j.Z,{children:(0,i.jsx)(Z.Z,{children:Array.isArray(K)?K.map(e=>"".concat(e.price," on ").concat(formatDate(e.date))).join("\n"):"No price history available"})})]}),(0,i.jsx)(f.Z,{open:X,autoHideDuration:6e3,onClose:handleSnackbarClose,anchorOrigin:{vertical:"bottom",horizontal:"left"},children:(0,i.jsx)(m.Z,{onClose:handleSnackbarClose,severity:"success",sx:{width:"100%"},children:ee})})]})}}}]);